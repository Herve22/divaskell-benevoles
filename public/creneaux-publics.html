<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Créneaux Disponibles - Krampouez Noz</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
  <link href="css/creneaux-publics.css" rel="stylesheet">
  <link href="css/bottom-nav.css" rel="stylesheet">
<!-- FAVICON & WEB APP -->
<link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
<link rel="manifest" href="/favicon/site.webmanifest">
<link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#f5b800">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="theme-color" content="#ffffff">
<link href="css/modal-fix.css" rel="stylesheet">
</head>
<body>
  <!-- Menu container (chargé par menu.js si connecté) -->
  <div id="menu-container"></div>

  <!-- HEADER -->
  <!-- HEADER -->
<header class="hero-header">
  <div class="container">
    <div class="text-center">
      <img src="https://cdn.helloasso.com/img/logos/croppedimage-0d622bbed30d4cb98f2ffae6ec25b6b7.png?width=192&height=192&quality=80&img_format=webp" 
           alt="Divaskell Plougastel" class="logo mb-3">
      <h1 class="display-5 fw-bold text-white mb-2">Créneaux Disponibles</h1>
      <p class="lead text-white-50" id="eventName">Chargement...</p>
      
      <!-- Bouton Se connecter (visible uniquement si non connecté) -->
      <div id="login-prompt" class="mt-3" style="display: none;">
        <a href="/public/index.html" class="btn btn-light btn-lg">
          <i class="bi bi-box-arrow-in-right me-2"></i>Se connecter pour gérer vos inscriptions
        </a>
      </div>
    </div>
  </div>
</header>

  <!-- MAIN CONTENT -->
  <main class="container my-5">
    <div id="loading" class="text-center py-5">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Chargement...</span>
      </div>
      <p class="mt-3 text-muted">Chargement des créneaux...</p>
    </div>

    <div id="noEvent" class="alert alert-info text-center d-none">
      <i class="bi bi-info-circle fs-4 mb-3 d-block"></i>
      <h5>Aucun événement à venir</h5>
      <p class="mb-0">Revenez bientôt pour découvrir les prochains créneaux !</p>
    </div>

    <div id="creneauxList" class="row g-4 d-none"></div>
  </main>

  <!-- MODAL INSCRIPTION -->
  <div class="modal fade" id="inscriptionModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            <i class="bi bi-calendar-check me-2"></i>
            <span id="modalTitle">Inscription au créneau</span>
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div id="creneauDetails" class="alert alert-light mb-4"></div>
          <div id="inscriptionMessage" class="alert d-none"></div>

          <form id="inscriptionForm">
            <input type="hidden" id="creneauId">
            
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">Pseudo *</label>
                <input type="text" class="form-control" id="inscriptionPrenom" placeholder="Votre pseudo" required>
              </div>
              <div class="col-md-6 mb-3">
                <label style="display:none" class="form-label">Nom</label>
                <input style="display:none" type="text" class="form-control" id="inscriptionNom" placeholder="Votre nom">
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label">Email *</label>
              <input type="email" class="form-control" id="inscriptionEmail" required placeholder="votre@email.com">
              <div class="form-text">Requis pour confirmation</div>
            </div>

            <div class="mb-3">
              <label class="form-label">Téléphone</label>
              <input type="tel" class="form-control" id="inscriptionTelephone" placeholder="06 12 34 56 78">
            </div>

            <div class="mb-3">
              <label class="form-label">Commentaire</label>
              <textarea class="form-control" id="inscriptionCommentaire" rows="2" placeholder="Informations complémentaires..."></textarea>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
          <button type="button" class="btn btn-primary" id="btnConfirmInscription">
            <i class="bi bi-check-circle me-2"></i>Confirmer l'inscription
          </button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/menu.js"></script>
  <script src="js/creneaux-publics.js"></script>
  <script src="js/bottom-nav.js"></script>
</body>
</html>
